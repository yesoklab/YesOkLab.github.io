
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WRISTORY | Digital Heritage by YesOkLab</title>
  <meta name="description" content="블록체인 기술로 역사를 보존합니다. WRISTORY NFT 에어드랍 및 컬렉션 공식 페이지.">
  <meta property="og:type" content="website">
  <meta property="og:title" content="WRISTORY - 에어드랍 등록 및 컬렉션">
  <meta property="og:description" content="안중근, 김구 등 한국의 위인들과 비트코인 역사를 담은 디지털 헤리티지 NFT.">
  <meta property="og:image" content="https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a">
  <meta property="twitter:card" content="summary_large_image">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Noto+Sans+KR:wght@300;400;500;700;900&family=Inter:wght@300;400;600;900&display=swap');
    body { font-family: 'Inter', 'Noto Sans KR', sans-serif; background-color: #0A0C14; color: #E2E8F0; }
    h1, h2, h3, .serif { font-family: 'Playfair Display', serif; }
    .text-shadow { text-shadow: 0 4px 12px rgba(0,0,0,0.6); }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #0f172a; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    .modal-open { overflow: hidden; }
    .glass-card { background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); }
    .hover-glow:hover { border-color: rgba(168, 85, 247, 0.4); box-shadow: 0 0 30px rgba(168, 85, 247, 0.15); }
    .sold-badge { background: linear-gradient(45deg, #ef4444, #f59e0b); }
    .voxel-heritage-bg { background: radial-gradient(circle at top right, rgba(212, 175, 55, 0.1), transparent); }
  </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "three": "https://esm.sh/three@^0.182.0",
    "three/": "https://esm.sh/three@^0.182.0/",
    "lucide-react": "https://esm.sh/lucide-react@^0.563.0"
  }
}
</script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const CHRISTMAS_IMAGE_URL = "https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a"; 
    const CHRISTMAS_NFT_LINK = "https://objkt.com/tokens/KT1AQkX48gLHaKSv1NPyrrJFFvZTFsUu9GP8/7?ref=tz1eXLHqJXBnp4VFGwFDfMGWcLYVgBUYnA16";

    const isChristmasSeason = () => {
      const now = new Date();
      const m = now.getMonth() + 1;
      const d = now.getDate();
      return (m === 12 && d >= 24 && d <= 31);
    };

    const seasonKey = () => `wristory_xmas_closed_${new Date().getFullYear()}`;

    const GOOGLE_FORM_URL_EN = "https://forms.gle/4Y4dSMy4wAh9Pzx47";
    const GOOGLE_FORM_URL_KO = "https://docs.google.com/forms/d/e/1FAIpQLSdagQ6wk6fVVbl0Q4gc5htaCAnnBlJt0fW_aivdx7BrLKCN9g/viewform";

    const TRANSLATIONS = {
      en: {
        nav: { collections: 'Collections', register: 'Airdrop', guide: 'Guide', ai: '✨ AI Curator' },
        hero: { title: 'History on Your Wrist', subtitle: 'Preserving legendary moments through blockchain. WRISTORY captures historical wisdom in interactive voxel art.', viewBtn: 'View Artifact' },
        home: { 
            fightersTitle: 'Archive I: Korean Independence Fighters', 
            bitcoinTitle: 'Archive II: The Bitcoin Chronicles', 
            freeMintTitle: 'Archive III: Free Creation Lab',
            voxelTitle: 'Archive IV: Voxel Heritage & Battle Series'
        },
        form: { title: 'Airdrop Registration', subtitle: 'Secure your spot in the WRISTORY heritage. Submissions are collected via official Google Forms.', naverBtn: 'Read Blog Announcement', telegramBtn: 'Join Telegram Channel', directBtn: 'Register Directly' },
        ai: {
          title: 'WRISTORY AI Assistant',
          subtitle: 'Ask about Kim Gu, An Jung-geun, or our Voxel series.',
          placeholder: 'Ask about the Turtle Ship...',
          send: 'Send',
          initialMsg: 'Welcome. I am the WRISTORY Curator. I can guide you through our archives, including the new Turtle Ship and Bubbles series.',
          error: 'Connection error. Please try again.',
          typing: 'Curating response...'
        },
        xmas: { title: "Merry Christmas", body: "Celebrating history and a hopeful new year with WRISTORY.", cta1: "View Seasonal NFT", cta2: "Ask AI", close: "Close" },
        footer: { rights: '© 2025 YesOkLab | WRISTORY Project. All Rights Reserved.' }
      },
      ko: {
        nav: { collections: '컬렉션', register: '에어드랍', guide: '가이드', ai: '✨ AI 큐레이터' },
        hero: { title: '손목 위의 역사', subtitle: '블록체인으로 영원히 보존되는 전설의 순간들. WRISTORY는 인터랙티브 복셀 아트로 역사의 지혜를 재현합니다.', viewBtn: '작품 보기' },
        home: { 
            fightersTitle: '아카이브 I: 대한민국 독립운동가', 
            bitcoinTitle: '아카이브 II: 비트코인 연대기', 
            freeMintTitle: '아카이브 III: 자유 창작 및 파트너 랩',
            voxelTitle: '아카이브 IV: 복셀 헤리티지 & 명량 시리즈'
        },
        form: { title: '에어드랍 참여 안내', subtitle: '공식 채널의 공지를 확인하고 화이트리스트에 등록하세요. 안전한 Google 설문지를 통해 접수됩니다.', naverBtn: '네이버 블로그 공지', telegramBtn: '텔레그램 참여', directBtn: '바로 등록하기' },
        ai: {
          title: 'WRISTORY AI 비서',
          subtitle: '독립운동가, 비트코인 역사, 복셀 시리즈에 대해 물어보세요.',
          placeholder: '거북선이나 버블스에 대해 물어보세요...',
          send: '전송',
          initialMsg: '안녕하세요. WRISTORY 큐레이터 AI입니다. 새로 추가된 거북선 시리즈와 완판된 버블스 #011 에디션에 대해서도 답변해 드릴 수 있습니다.',
          error: '연결에 실패했습니다.',
          typing: '답변을 구성 중입니다...'
        },
        xmas: { title: "성탄 축하 메시지", body: "WRISTORY와 함께 기쁜 성탄과 희망찬 새해를 맞이하시길 바랍니다.", cta1: "성탄 NFT 보기", cta2: "AI 비서에게 묻기", close: "닫기" },
        footer: { rights: '© 2025 YesOkLab | WRISTORY Project. All Rights Reserved.' }
      }
    };

    const INDEPENDENCE_FIGHTERS = [
      { id: '1', title: { en: 'Baekbeom Kim Gu', ko: '백범 김구' }, description: { en: 'Leader of Provisional Government.', ko: '임시정부의 주석, 문화강국을 꿈꾼 지도자.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreie4kz6obq6hjvwtrn5hi33yptemfch6kkjmwj5h22b7imipxjxd6u', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/32' },
      { id: '2', title: { en: 'An Jung-geun', ko: '안중근' }, description: { en: 'Hero of Harbin.', ko: '하얼빈 의거의 영웅, 동양평화론의 선구자.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreic4bp2ylmmamglszxxnnbipbqlz535qfrhtlm5sgc72lpssvsi3x4', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/30' },
      { id: '3', title: { en: 'Ahn Chang-ho', ko: '도산 안창호' }, description: { en: 'National educator.', ko: '흥사단 창립, 민족의 스승.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreig2qpetwuern2nyndlzn4u2z3j752su7pmx7jxrdmwr7man7dfdg4', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/31' },
      { id: '4', title: { en: 'Yun Bong-gil', ko: '윤봉길' }, description: { en: 'Hongkew Park martyr.', ko: '상하이 홍커우 공원 의거의 영웅.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaayojxjidmtyu6rnqtfwmabestd7qf7aai4klqpjfflqk4pzytde', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/33' },
      { id: '5', title: { en: 'Yu Gwan-sun', ko: '유관순' }, description: { en: 'March 1st symbol.', ko: '3.1 운동의 상징, 자유의 불꽃.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiejrnn2dpacgyyexuil5obifqgnfapdgvctsxwm7ne2ny7d6ifh6i', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/27' },
    ];

    const VOXEL_HERITAGE = [
      { id: 'v1', title: { en: 'Turtle Ship #1597', ko: '거북선 #1597 (명량)' }, description: { en: 'Battle-scarred one-eyed dragon.', ko: '1597년 울돌목의 기적을 담은 인터랙티브 아트.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/35', badge: 'LEGENDARY' },
      { id: 'v2', title: { en: 'Bubbles #011', ko: '버블스 #011 (황금 에디션)' }, description: { en: 'Golden Legacy. Sold Out artifact.', ko: '완판된 전설적인 황금 에디션. 영원한 기억.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a', link: 'https://objkt.com/tokens/KT1AQkX48gLHaKSv1NPyrrJFFvZTFsUu9GP8/7', badge: 'SOLD OUT', sold: true },
    ];

    const BITCOIN_CHRONICLES = [
      { id: 'b1', title: { en: 'Bitcoin Whitepaper', ko: '비트코인 백서 컬렉션' }, description: { en: 'Satoshi Nakamoto\'s legacy.', ko: '사토시 나카모토의 혁명을 보존합니다.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreifvrgo5jj3tfkf6yeuvodplfdg46pfx6mgfzilrwewxb333xu6sru', link: 'https://objkt.com/collections/KT1BywQidkDZoSaS38cv1xGWRgXBkx9qFeVe' },
    ];

    const FREE_MINT = [
        { id: 'f1', title: { en: 'FORK PROJECT', ko: '포크 프로젝트' }, description: { en: 'Exploring divergence.', ko: '분기를 탐구하는 실험적 아트.' }, imageUrl: 'https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafybeibs6petkvozp4qfxdd4mvtcnxvfpmuxuxixkvxoa7wr24mhu7fpku', link: 'https://objkt.com/collections/KT1XMCJGLo9vnHRAf5LQdw9z3BF9yGVfffnm' }
    ];

    const Card = ({ item, lang }) => (
      <a href={item.link} target="_blank" rel="noreferrer" 
         className="group relative glass-card rounded-2xl overflow-hidden hover-glow transition-all duration-500 block">
        <div className="aspect-[4/5] overflow-hidden relative">
          <img src={item.imageUrl} alt={item.title[lang]} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" />
          {item.badge && (
            <div className={`absolute top-4 right-4 px-3 py-1 rounded-full text-[10px] font-black text-white shadow-xl ${item.sold ? 'sold-badge' : 'bg-indigo-600 animate-pulse'}`}>
              {item.badge}
            </div>
          )}
          <div className="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent opacity-80"></div>
          <div className="absolute bottom-4 left-4 right-4">
            <h3 className="text-white font-bold text-lg leading-tight group-hover:text-purple-300 transition-colors">{item.title[lang]}</h3>
            <p className="text-slate-300 text-xs mt-1 opacity-0 group-hover:opacity-100 transition-opacity">{item.description[lang]}</p>
          </div>
        </div>
      </a>
    );

    const Section = ({ title, items, lang }) => (
      <section className="max-w-7xl mx-auto px-6 mb-24">
        <div className="flex items-center gap-4 mb-10">
            <h2 className="text-2xl md:text-3xl font-black serif text-white">{title}</h2>
            <div className="h-0.5 flex-1 bg-slate-800 rounded-full"></div>
        </div>
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
          {items.map(it => <Card key={it.id} item={it} lang={lang} />)}
        </div>
      </section>
    );

    const AiAssistant = ({ language }) => {
      const t = TRANSLATIONS[language];
      const [messages, setMessages] = useState([{ role: 'model', text: t.ai.initialMsg }]);
      const [input, setInput] = useState('');
      const [isTyping, setIsTyping] = useState(false);
      const scrollRef = useRef(null);

      useEffect(() => { scrollRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages, isTyping]);

      const handleSend = async (e) => {
        e.preventDefault();
        if (!input.trim() || isTyping) return;
        const msg = input; setInput('');
        setMessages(prev => [...prev, { role: 'user', text: msg }]);
        setIsTyping(true);
        try {
          const res = await fetch(`/.netlify/functions/ask-ai`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ userMessage: msg, lang: language })
          });
          const data = await res.json();
          setMessages(prev => [...prev, { role: 'model', text: data.reply }]);
        } catch (err) {
          setMessages(prev => [...prev, { role: 'model', text: t.ai.error }]);
        } finally { setIsTyping(false); }
      };

      return (
        <div className="max-w-4xl mx-auto h-[65vh] glass-card rounded-3xl overflow-hidden flex flex-col">
          <div className="p-5 border-b border-white/5 flex justify-between items-center bg-slate-900/40">
            <div><p className="font-black text-white">{t.ai.title}</p><p className="text-[10px] text-slate-500 uppercase font-bold">{t.ai.subtitle}</p></div>
            <div className="w-3 h-3 rounded-full bg-emerald-500 animate-pulse"></div>
          </div>
          <div className="flex-1 overflow-y-auto p-6 space-y-4">
            {messages.map((m, i) => (
              <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                <div className={`max-w-[80%] p-4 rounded-2xl text-sm leading-relaxed ${m.role === 'user' ? 'bg-purple-600 text-white font-medium' : 'bg-slate-800 text-slate-200'}`}>
                  {m.text}
                </div>
              </div>
            ))}
            {isTyping && <div className="text-xs text-slate-500 italic animate-pulse">{t.ai.typing}</div>}
            <div ref={scrollRef} />
          </div>
          <form onSubmit={handleSend} className="p-4 bg-slate-950/50 border-t border-white/5 flex gap-3">
            <input value={input} onChange={e => setInput(e.target.value)} placeholder={t.ai.placeholder}
                   className="flex-1 bg-slate-900 border border-white/10 rounded-xl px-4 py-3 text-sm focus:border-purple-500 outline-none transition-all" />
            <button type="submit" className="bg-purple-600 px-6 py-3 rounded-xl font-bold text-white hover:bg-purple-500 transition-all">{t.ai.send}</button>
          </form>
        </div>
      );
    };

    const App = () => {
      const [view, setView] = useState('HOME');
      const [lang, setLang] = useState('ko');
      const [showXmas, setShowXmas] = useState(false);
      const t = TRANSLATIONS[lang];

      useEffect(() => {
        if (isChristmasSeason() && localStorage.getItem(seasonKey()) !== "1") {
          setShowXmas(true);
          document.body.classList.add("modal-open");
        }
      }, []);

      return (
        <div className="min-h-screen voxel-heritage-bg pb-20">
          <nav className="sticky top-0 z-50 glass-card border-none bg-slate-950/80 backdrop-blur-xl">
            <div className="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
              <div className="flex items-center gap-3 cursor-pointer" onClick={() => setView('HOME')}>
                <img src="https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a" className="w-10 h-10 rounded-xl shadow-lg" />
                <span className="text-xl font-black serif text-white tracking-tighter">WRISTORY</span>
              </div>
              <div className="flex items-center gap-4 md:gap-8 text-xs font-black uppercase tracking-widest">
                <button onClick={() => setView('HOME')} className={view === 'HOME' ? 'text-purple-400' : 'text-slate-400'}>{t.nav.collections}</button>
                <button onClick={() => setView('AIRDROP')} className={view === 'AIRDROP' ? 'text-purple-400' : 'text-slate-400'}>{t.nav.register}</button>
                <button onClick={() => setView('AI')} className={`px-4 py-2 rounded-full border border-white/10 ${view === 'AI' ? 'bg-purple-600 text-white' : 'text-slate-400'}`}>{t.nav.ai}</button>
                <button onClick={() => setLang(l => l === 'en' ? 'ko' : 'en')} className="w-9 h-9 flex items-center justify-center rounded-full bg-slate-800 text-white">{lang === 'en' ? 'KO' : 'EN'}</button>
              </div>
            </div>
          </nav>

          {view === 'HOME' && (
            <main>
              <div className="py-24 px-6 text-center max-w-4xl mx-auto">
                <h1 className="text-5xl md:text-8xl font-black text-white mb-8 text-shadow serif leading-tight tracking-tighter">{t.hero.title}</h1>
                <p className="text-lg md:text-xl text-slate-400 leading-relaxed font-medium mb-12">{t.hero.subtitle}</p>
                <button onClick={() => setView('AI')} className="px-10 py-4 rounded-full bg-white text-slate-950 font-black hover:scale-105 transition-transform shadow-2xl shadow-white/10">{t.hero.viewBtn} →</button>
              </div>

              <Section title={t.home.voxelTitle} items={VOXEL_HERITAGE} lang={lang} />
              <Section title={t.home.fightersTitle} items={INDEPENDENCE_FIGHTERS} lang={lang} />
              <Section title={t.home.bitcoinTitle} items={BITCOIN_CHRONICLES} lang={lang} />
              <Section title={t.home.freeMintTitle} items={FREE_MINT} lang={lang} />
            </main>
          )}

          {view === 'AIRDROP' && (
            <div className="py-20 px-6 max-w-2xl mx-auto">
              <div className="glass-card p-10 rounded-[3rem] text-center">
                <h2 className="text-3xl font-black serif text-white mb-4">{t.form.title}</h2>
                <p className="text-slate-400 mb-10">{t.form.subtitle}</p>
                <div className="grid gap-4">
                    <a href="https://blog.naver.com/yesoklab" target="_blank" className="bg-[#03C75A] py-4 rounded-2xl font-black text-white">{t.form.naverBtn}</a>
                    <a href="https://t.me/YesOkLab_WRISTORY_NFT" target="_blank" className="bg-[#2AABEE] py-4 rounded-2xl font-black text-white">{t.form.telegramBtn}</a>
                    <a href={lang === 'ko' ? GOOGLE_FORM_URL_KO : GOOGLE_FORM_URL_EN} target="_blank" className="bg-gradient-to-r from-purple-600 to-indigo-600 py-4 rounded-2xl font-black text-white shadow-xl">{t.form.directBtn}</a>
                </div>
              </div>
            </div>
          )}

          {view === 'AI' && <div className="py-20 px-6"><AiAssistant language={lang} /></div>}

          <footer className="mt-20 py-20 border-t border-white/5 bg-slate-950/30 text-center">
            <img src="https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a" className="w-16 h-16 mx-auto mb-6 opacity-50 grayscale" />
            <p className="text-slate-500 text-sm font-bold tracking-widest">{t.footer.rights}</p>
          </footer>

          {showXmas && (
            <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-950/90 backdrop-blur-xl">
              <div className="glass-card max-w-lg w-full rounded-[3rem] overflow-hidden shadow-2xl animate-in zoom-in duration-300">
                <img src={CHRISTMAS_IMAGE_URL} className="w-full h-64 object-cover" />
                <div className="p-10 text-center">
                    <h3 className="text-3xl font-black serif text-amber-200 mb-4">{t.xmas.title}</h3>
                    <p className="text-slate-300 text-sm mb-8 leading-relaxed italic">"{t.xmas.body}"</p>
                    <div className="flex flex-col gap-3">
                        <a href={CHRISTMAS_NFT_LINK} target="_blank" className="bg-amber-500 text-slate-950 py-4 rounded-2xl font-black">{t.xmas.cta1}</a>
                        <button onClick={() => { setShowXmas(false); setView('AI'); }} className="text-slate-400 text-xs font-bold uppercase">{t.xmas.cta2}</button>
                        <button onClick={() => { setShowXmas(false); localStorage.setItem(seasonKey(), "1"); }} className="mt-2 text-slate-600 text-[10px] font-black uppercase tracking-widest">{t.xmas.close}</button>
                    </div>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
