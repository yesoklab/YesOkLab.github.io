<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WRISTORY | Digital Heritage by YesOkLab</title>
  <meta name="description" content="Î∏îÎ°ùÏ≤¥Ïù∏ Í∏∞Ïà†Î°ú Ïó≠ÏÇ¨Î•º Î≥¥Ï°¥Ìï©ÎãàÎã§. WRISTORY NFT ÏóêÏñ¥ÎìúÎûç Î∞è Ïª¨Î†âÏÖò Í≥µÏãù ÌéòÏù¥ÏßÄ.">
  <meta property="og:type" content="website">
  <meta property="og:title" content="WRISTORY - ÏóêÏñ¥ÎìúÎûç Îì±Î°ù Î∞è Ïª¨Î†âÏÖò">
  <meta property="og:description" content="ÏïàÏ§ëÍ∑º, ÍπÄÍµ¨ Îì± ÌïúÍµ≠Ïùò ÏúÑÏù∏Îì§Í≥º ÎπÑÌä∏ÏΩîÏù∏ Ïó≠ÏÇ¨Î•º Îã¥ÏùÄ ÎîîÏßÄÌÑ∏ Ìó§Î¶¨Ìã∞ÏßÄ NFT.">
  <meta property="og:image" content="https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a">
  <meta property="twitter:card" content="summary_large_image">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Noto+Sans+KR:wght@300;400;500;700&family=Inter:wght@300;400;600&display=swap');
    body { font-family: 'Inter', 'Noto Sans KR', sans-serif; background-color: #0F111A; color: #E2E8F0; }
    h1, h2, h3, .serif { font-family: 'Playfair Display', serif; }
    .text-shadow { text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #1e293b; }
    ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    
    /* ÏÑ±ÌÉÑ Î∞∞ÎÑà Ïï†ÎãàÎ©îÏù¥ÏÖò */
    .xmas-banner { background: linear-gradient(90deg, #7f1d1d, #14532d, #7f1d1d); background-size: 200% auto; animation: shine 5s linear infinite; }
    @keyframes shine { to { background-position: 200% center; } }
    
    body.modal-open { overflow: hidden; }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ‚úÖ ÏÑ±ÌÉÑ ÏÑ§Ï†ï
    const XMAS_NFT_LINK = "https://objkt.com/tokens/KT1AQkX48gLHaKSv1NPyrrJFFvZTFsUu9GP8/7?ref=tz1eXLHqJXBnp4VFGwFDfMGWcLYVgBUYnA16";
    
    const TRANSLATIONS = {
      en: {
        xmas: { banner: "üéÑ Merry Christmas! Celebrate with us.", link: "View Special NFT ‚Üó" },
        nav: { collections: 'Collections', register: 'Airdrop', guide: 'Guide', ai: '‚ú® Ask AI' },
        hero: { title: 'History on Your Wrist', subtitle: 'Preserving legendary moments through blockchain technology.' },
        home: { fightersTitle: 'Archive I: Korean Independence Fighters', bitcoinTitle: 'Archive II: The Bitcoin Chronicles', freeMintTitle: 'Archive III: Free Creation & Partner Labs' },
        ai: { title: 'WRISTORY AI Assistant', subtitle: 'Ask about history.', placeholder: 'Ask anything...', send: 'Send', initialMsg: 'Hello! I am WRISTORY AI. Happy Holidays!', error: 'Connection failed.', typing: 'Thinking...' },
        footer: { rights: '¬© 2025 YesOkLab | WRISTORY Project. All Rights Reserved.' }
      },
      ko: {
        xmas: { banner: "üéÑ Í∏∞ÏÅú ÏÑ±ÌÉÑÍ≥º Ìù¨ÎßùÏ∞¨ ÏÉàÌï¥Î•º ÎßûÏù¥ÌïòÏó¨ Ï∂ïÎ≥µÏù¥ Í∞ÄÎìùÌïòÏãúÍ∏∏ Í∏∞ÏõêÌï©ÎãàÎã§.", link: "ÌäπÎ≥Ñ ÏÑ±ÌÉÑ NFT Î≥¥Í∏∞ ‚Üó" },
        nav: { collections: 'Ïª¨Î†âÏÖò', register: 'ÏóêÏñ¥ÎìúÎûç', guide: 'Í∞ÄÏù¥Îìú', ai: '‚ú® AI ÏßàÎ¨∏' },
        hero: { title: 'ÏÜêÎ™© ÏúÑÏùò Ïó≠ÏÇ¨', subtitle: 'Î∏îÎ°ùÏ≤¥Ïù∏ Í∏∞Ïà†ÏùÑ ÌÜµÌï¥ Ï†ÑÏÑ§Ï†ÅÏù∏ ÏàúÍ∞ÑÎì§ÏùÑ Î≥¥Ï°¥Ìï©ÎãàÎã§.' },
        home: { fightersTitle: 'ÏïÑÏπ¥Ïù¥Î∏å I: ÎåÄÌïúÎØºÍµ≠ ÎèÖÎ¶ΩÏö¥ÎèôÍ∞Ä', bitcoinTitle: 'ÏïÑÏπ¥Ïù¥Î∏å II: ÎπÑÌä∏ÏΩîÏù∏ Ïó∞ÎåÄÍ∏∞', freeMintTitle: 'ÏïÑÏπ¥Ïù¥Î∏å III: ÏûêÏú† Ï∞ΩÏûë Î∞è ÌååÌä∏ÎÑà Îû©' },
        ai: { title: 'WRISTORY AI ÎπÑÏÑú', subtitle: 'Ïó≠ÏÇ¨Ï†Å Î∞∞Í≤ΩÏù¥ÎÇò ÌîÑÎ°úÏ†ùÌä∏Ïóê ÎåÄÌï¥ Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî.', placeholder: 'Í∂ÅÍ∏àÌïú Ï†êÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...', send: 'Ï†ÑÏÜ°', initialMsg: 'ÏïàÎÖïÌïòÏÑ∏Ïöî. WRISTORY AIÏûÖÎãàÎã§. Ï¶êÍ±∞Ïö¥ ÏÑ±ÌÉÑ ÎêòÏÑ∏Ïöî!', error: 'Ïó∞Í≤∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', typing: 'ÏÉùÍ∞Å Ï§ë...' },
        footer: { rights: '¬© 2025 YesOkLab | WRISTORY Project. All Rights Reserved.' }
      }
    };

    // Ïù¥ÎØ∏ÏßÄ Ï£ºÏÜåÎ•º Í∞ÄÏû• ÏïàÏ†ïÏ†ÅÏù∏ Í≥µÏö© Í≤åÏù¥Ìä∏Ïõ®Ïù¥(ipfs.io)Î°ú Î≥ÄÍ≤ΩÌñàÏäµÎãàÎã§.
    const INDEPENDENCE_FIGHTERS_COLLECTIONS = [
      { id: '1', title: { ko: 'Î∞±Î≤î ÍπÄÍµ¨' }, imageUrl: 'https://ipfs.io/ipfs/bafkreie4kz6obq6hjvwtrn5hi33yptemfch6kkjmwj5h22b7imipxjxd6u', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/32' },
      { id: '2', title: { ko: 'ÏïàÏ§ëÍ∑º' }, imageUrl: 'https://ipfs.io/ipfs/bafkreic4bp2ylmmamglszxxnnbipbqlz535qfrhtlm5sgc72lpssvsi3x4', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/30' },
      { id: '3', title: { ko: 'ÎèÑÏÇ∞ ÏïàÏ∞ΩÌò∏' }, imageUrl: 'https://ipfs.io/ipfs/bafkreig2qpetwuern2nyndlzn4u2z3j752su7pmx7jxrdmwr7man7dfdg4', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/31' },
      { id: '4', title: { ko: 'Ïú§Î¥âÍ∏∏' }, imageUrl: 'https://ipfs.io/ipfs/bafkreiaayojxjidmtyu6rnqtfwmabestd7qf7aai4klqpjfflqk4pzytde', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/33' },
      { id: '5', title: { ko: 'ÍπÄÎßàÎ¶¨ÏïÑ' }, imageUrl: 'https://ipfs.io/ipfs/bafkreigza7i6mn2jkwbdcy64f5scwji4g6g2fsranp6w4fujn3bf7g3wca', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/14' },
      { id: '6', title: { ko: 'Ïú†Í¥ÄÏàú' }, imageUrl: 'https://ipfs.io/ipfs/bafkreifv2thpaq2t3dgve3tomhb6eccwitgy6fi3qa256jeeafqtcx3ihy', link: 'https://objkt.com/tokens/KT1A77WVak4yMFoHDNzpAf8PGA7YLmh5wMJ8/7' },
    ];

    const BITCOIN_CHRONICLES_COLLECTIONS = [
      { id: '11', title: { ko: 'ÎπÑÌä∏ÏΩîÏù∏ ÌîºÏûê' }, imageUrl: 'https://ipfs.io/ipfs/bafkreidh4ahkgq4ot4s5gnpfufy4tkboeb7pfi5rbxm75bq3biwi2dwiby', link: 'https://objkt.com/collections/KT1JU866vUaq8ac5KkmuW8XKnEbNXiVHRqUy', color: 'from-pink-600 to-orange-500' },
      { id: '12', title: { ko: 'ÎπÑÌä∏ÏΩîÏù∏ Î∞±ÏÑú' }, imageUrl: 'https://ipfs.io/ipfs/bafkreifvrgo5jj3tfkf6yeuvodplfdg46pfx6mgfzilrwewxb333xu6sru', link: 'https://objkt.com/collections/KT1BywQidkDZoSaS38cv1xGWRgXBkx9qFeVe', color: 'from-amber-500 to-blue-700' },
    ];
    
    const FREE_MINTING_COLLECTIONS = [
      { id: '13', title: { ko: 'Ìè¨ÌÅ¨ ÌîÑÎ°úÏ†ùÌä∏' }, imageUrl: 'https://ipfs.io/ipfs/bafybeibs6petkvozp4qfxdd4mvtcnxvfpmuxuxixkvxoa7wr24mhu7fpku', link: 'https://objkt.com/collections/KT1XMCJGLo9vnHRAf5LQdw9z3BF9yGVfffnm', color: 'from-teal-500 to-cyan-600' },
      { id: '14', title: { ko: 'ÌîÑÎ¶¨ ÌÅ¨Î¶¨ÏóêÏù¥ÏÖò' }, imageUrl: 'https://ipfs.io/ipfs/bafkreihmtnnmlq4u3tanpax6zqo7oqzwkolmqsqn2gfeyko57s2ydmqo5e', link: 'https://objkt.com/collections/KT1AQkX48gLHaKSv1NPyrrJFFvZTFsUu9GP8', color: 'from-slate-600 to-gray-700' },
    ];
    const CollectionCard = ({ collection, language }) => (
      <a href={collection.link} target="_blank" className="block bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden hover:border-purple-500 transition-all duration-300 group">
        <div className="h-64 overflow-hidden relative">
          <img src={collection.imageUrl} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"/>
          <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 backdrop-blur-[2px]">
            <span className="bg-white/20 p-3 rounded-full border border-white/30 text-white">‚Üó</span>
          </div>
        </div>
        <div className="p-5 text-center font-bold text-slate-100">{collection.title.ko}</div>
      </a>
    );

    const SpecialCollectionSection = ({ collection, language, index }) => {
      const isReversed = index % 2 === 1;
      return (
        <section className="w-full py-16 md:py-20 relative overflow-hidden">
          <div className={`absolute inset-0 bg-gradient-to-br ${collection.color} opacity-90`}></div>
          <div className={`relative z-10 max-w-6xl mx-auto px-6 flex flex-col ${isReversed ? 'md:flex-row-reverse' : 'md:flex-row'} items-center gap-12`}>
            <div className="flex-1 text-center md:text-left text-white">
              <h2 className="text-4xl font-bold serif mb-6">{collection.title.ko}</h2>
              <a href={collection.link} target="_blank" className="inline-flex px-8 py-4 bg-white text-gray-800 font-bold rounded-full shadow-lg">ÎëòÎü¨Î≥¥Í∏∞ ‚Üó</a>
            </div>
            <div className="flex-1 max-w-md">
              <div className="aspect-square bg-white/10 rounded-3xl p-4 backdrop-blur-sm border border-white/20">
                <img src={collection.imageUrl} className="w-full h-full object-cover rounded-2xl shadow-2xl" />
              </div>
            </div>
          </div>
        </section>
      );
    };

    const AiAssistant = ({ language }) => {
      const t = TRANSLATIONS[language];
      const [messages, setMessages] = useState([{ role: 'model', text: t.ai.initialMsg }]);
      const [input, setInput] = useState('');
      const [isTyping, setIsTyping] = useState(false);
      const scrollRef = useRef(null);

      useEffect(() => { scrollRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages]);

      const handleSend = async (e) => {
        e.preventDefault();
        if (!input.trim() || isTyping) return;
        const text = input; setInput('');
        setMessages(prev => [...prev, { role: 'user', text }]);
        setIsTyping(true);
        try {
          const response = await fetch(`/.netlify/functions/ask-ai`, {
            method: 'POST', headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ userMessage: text })
          });
          const data = await response.json();
          setMessages(prev => [...prev, { role: 'model', text: data.reply }]);
        } catch {
          setMessages(prev => [...prev, { role: 'model', text: t.ai.error }]);
        } finally { setIsTyping(false); }
      };

      return (
        <div className="max-w-4xl mx-auto h-[60vh] bg-slate-800/50 rounded-2xl border border-slate-700 flex flex-col overflow-hidden">
          <div className="bg-slate-900 p-4 border-b border-slate-700 font-bold">{t.ai.title}</div>
          <div className="flex-1 overflow-y-auto p-6 space-y-4">
            {messages.map((msg, i) => (
              <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                <div className={`max-w-[80%] p-4 rounded-2xl ${msg.role === 'user' ? 'bg-purple-600' : 'bg-slate-700'}`}>{msg.text}</div>
              </div>
            ))}
            {isTyping && <div className="text-slate-400 text-sm ml-4">Thinking...</div>}
            <div ref={scrollRef} />
          </div>
          <form onSubmit={handleSend} className="p-4 bg-slate-900 flex gap-4">
            <input type="text" value={input} onChange={e => setInput(e.target.value)} placeholder={t.ai.placeholder} className="flex-1 bg-slate-800 border-slate-600 rounded-xl px-4 py-3 text-white outline-none focus:border-purple-500" />
            <button type="submit" className="bg-purple-600 px-6 py-3 rounded-xl font-bold text-white">Ï†ÑÏÜ°</button>
          </form>
        </div>
      );
    };

    const App = () => {
      const [view, setView] = useState('HOME');
      const [lang, setLang] = useState('ko');
      const t = TRANSLATIONS[lang];

      return (
        <div className="min-h-screen">
          {/* ‚úÖ ÏÑ±ÌÉÑ Í≥†Ï†ï Î∞∞ÎÑà (ÎîîÏûêÏù∏ÏùÑ Ìï¥ÏπòÏßÄ ÏïäÏùå) */}
          <div className="xmas-banner py-3 text-center text-white text-sm font-bold shadow-lg">
            {t.xmas.banner} 
            <a href={XMAS_NFT_LINK} target="_blank" className="ml-4 underline hover:text-yellow-300 transition-colors">
              {t.xmas.link}
            </a>
          </div>

          <nav className="sticky top-0 z-50 bg-[#0F111A]/80 backdrop-blur-md border-b border-slate-800 h-20 flex items-center px-6 justify-between">
            <div className="flex items-center gap-3 cursor-pointer" onClick={() => setView('HOME')}>
              <span className="text-2xl font-bold serif text-white">WRISTORY</span>
            </div>
            <div className="flex gap-6 text-sm font-medium">
              <button onClick={() => setView('HOME')} className={view === 'HOME' ? 'text-white' : 'text-slate-400'}>{t.nav.collections}</button>
              <button onClick={() => setView('AI')} className="bg-slate-800 text-purple-300 px-4 py-1 rounded-full border border-slate-600">{t.nav.ai}</button>
              <button onClick={() => setLang(l => l === 'en' ? 'ko' : 'en')} className="w-10 h-10 rounded-full bg-slate-700 text-xs">{lang.toUpperCase()}</button>
            </div>
          </nav>

          <main className="relative z-10">
            {view === 'HOME' && (
              <div className="pb-20">
                <div className="py-24 px-6 text-center">
                  <h1 className="text-5xl md:text-7xl font-bold serif text-white mb-6">{t.hero.title}</h1>
                  <p className="text-xl text-slate-400 max-w-2xl mx-auto">{t.hero.subtitle}</p>
                </div>

                {/* ÏïÑÏπ¥Ïù¥Î∏å I */}
                <div className="max-w-7xl mx-auto px-6 mb-20">
                  <h2 className="text-3xl font-bold text-white serif mb-10 text-center">{t.home.fightersTitle}</h2>
                  <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6">
                    {INDEPENDENCE_FIGHTERS_COLLECTIONS.map(col => <CollectionCard key={col.id} collection={col} language={lang} />)}
                  </div>
                </div>

                {/* ÏïÑÏπ¥Ïù¥Î∏å II */}
                <div className="space-y-10">
                  <h2 className="text-3xl font-bold text-white serif text-center mb-8">{t.home.bitcoinTitle}</h2>
                  {BITCOIN_CHRONICLES_COLLECTIONS.map((col, index) => (
                    <SpecialCollectionSection key={col.id} collection={col} language={lang} index={index} />
                  ))}
                </div>

                {/* ÏïÑÏπ¥Ïù¥Î∏å III */}
                <div className="max-w-7xl mx-auto px-6 mt-20">
                  <h2 className="text-3xl font-bold text-white serif mb-10 text-center">{t.home.freeMintTitle}</h2>
                  <div className="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    {FREE_MINTING_COLLECTIONS.map(col => <CollectionCard key={col.id} collection={col} language={lang} />)}
                  </div>
                </div>
              </div>
            )}
            {view === 'AI' && <div className="py-12 px-6"><AiAssistant language={lang} /></div>}
          </main>

          <footer className="py-12 text-center text-slate-600 text-sm border-t border-slate-800">
            <p>{t.footer.rights}</p>
          </footer>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
