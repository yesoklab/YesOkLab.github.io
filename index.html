 <div className="h-64 overflow-hidden relative">
                        <img src={collection.imageUrl} alt={collection.title[language]} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"/>
                        <div className="absolute inset-0 bg-black/20 group-hover:bg-black/0 transition-all"></div>
                        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30 backdrop-blur-[1px]">
                            <span className="bg-white/20 p-2 rounded-full border border-white/30 text-white">↗</span>
                        </div>
                    </div>
                    <div className="p-5">
                        <h3 className="text-xl font-bold serif text-slate-100 mb-2 group-hover:text-purple-300">{collection.title[language]}</h3>
                        <p className="text-slate-400 text-sm mb-4 line-clamp-2 h-10">{collection.description[language]}</p>
                        <div className="flex justify-between items-center text-xs font-medium text-slate-300 border-t border-slate-700/50 pt-4">
                            <span className="bg-slate-700/50 px-2 py-1 rounded">{collection.itemsCount > 0 ? `${collection.itemsCount} Items` : 'Limited'}</span>
                            <span className="text-purple-400">Tezos Chain</span>
                        </div>
                    </div>
                </Container>
            );
        };

        const AirdropForm = ({ language }) => {
            const t = TRANSLATIONS[language];
            const [address, setAddress] = useState('');
            const [status, setStatus] = useState({ submitted: false, address: '' });
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!/^(tz1|tz2|tz3|KT1)[1-9A-HJ-NP-Za-km-z]{33}$/.test(address)) {
                    setError(t.form.error); return;
                }
                setLoading(true);
                // 여기에 구글 시트 전송 로직 등 추가 가능
                setTimeout(() => {
                    setStatus({ submitted: true, address });
                    setLoading(false);
                }, 1000);
            };

            if (status.submitted) {
                return (
                    <div className="max-w-md mx-auto mt-10 p-8 bg-slate-800/50 rounded-2xl border border-green-500/30 text-center">
                        <h3 className="text-2xl font-bold text-white mb-2">{t.form.successTitle}</h3>
                        <p className="text-slate-300 mb-6">{t.form.successMsg}</p>
                        <button onClick={() => { setStatus({ submitted: false, address: '' }); setAddress(''); }} className="text-slate-400 hover:text-white underline text-sm">{t.form.registerAnother}</button>
                    </div>
                );
            }

            return (
                <div className="max-w-2xl mx-auto mt-10 bg-slate-800/80 p-8 rounded-3xl border border-slate-700 shadow-2xl">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-bold serif text-white mb-3">{t.form.title}</h2>
                        <p className="text-slate-400">{t.form.subtitle}</p>
                    </div>
                    <form onSubmit={handleSubmit} className="space-y-6">
                        <div>
                            <label className="block text-sm font-medium text-slate-300 mb-2">{t.form.label}</label>
                            <input type="text" value={address} onChange={(e) => setAddress(e.target.value)} placeholder={t.form.placeholder} className="w-full px-5 py-4 bg-slate-900/50 border border-slate-600 rounded-xl text-white outline-none focus:border-purple-500 transition-all font-mono"/>
                            {error && <p className="mt-2 text-red-400 text-sm">{error}</p>}
                        </div>
                        <button type="submit" disabled={loading} className="w-full py-4 rounded-xl font-bold text-lg bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white shadow-lg transition-all">{loading ? t.form.verifying : t.form.submit}</button>
                    </form>
                </div>
            );
        };

        const AiAssistant = ({ language }) => {
            const t = TRANSLATIONS[language];
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');
            const [isTyping, setIsTyping] = useState(false);
            const scrollRef = useRef(null);

            useEffect(() => { setMessages([{ role: 'model', text: t.ai.initialMsg }]); }, [language]);
            useEffect(() => { scrollRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages, isTyping]);

            const handleSend = async (e) => {
                e.preventDefault();
                if (!input.trim() || isTyping) return;
                const userMsg = input;
                setInput('');
                setMessages(prev => [...prev, { role: 'user', text: userMsg }]);
                setIsTyping(true);

                // Simple API Call to Gemini (No SDK required for simple HTML file)
                try {
                    if(!GEMINI_API_KEY) throw new Error("API Key Missing");
                    
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: userMsg }] }],
                            systemInstruction: { parts: [{ text: "You are the AI for WRISTORY NFT project. Explain Korean history (Ahn Jung-geun, Kim Gu) and Airdrop process. Speak Korean if asked in Korean." }] }
                        })
                    });
                    const data = await response.json();
                    const reply = data.candidates?.[0]?.content?.parts?.[0]?.text || "Error processing request.";
                    setMessages(prev => [...prev, { role: 'model', text: reply }]);
                } catch (err) {
                    console.error(err);
                    setMessages(prev => [...prev, { role: 'model', text: t.ai.error }]);
                } finally {
                    setIsTyping(false);
                }
            };

            return (
                <div className="max-w-4xl mx-auto h-[600px] bg-slate-800/50 rounded-2xl border border-slate-700 flex flex-col">
                    <div className="bg-slate-900/80 p-4 border-b border-slate-700 font-bold text-slate-200">{t.ai.title}</div>
                    <div className="flex-1 overflow-y-auto p-6 space-y-4">
                        {messages.map((msg, i) => (
                            <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                <div className={`max-w-[80%] p-4 rounded-2xl ${msg.role === 'user' ? 'bg-purple-600 text-white' : 'bg-slate-700 text-slate-200'}`}>{msg.text}</div>
                            </div>
                        ))}
                        {isTyping && <div className="text-slate-400 text-sm ml-4">{t.ai.typing}</div>}
                        <div ref={scrollRef} />
                    </div>
                    <form onSubmit={handleSend} className="p-4 bg-slate-900/80 border-t border-slate-700 flex gap-4">
                        <input type="text" value={input} onChange={e => setInput(e.target.value)} placeholder={t.ai.placeholder} className="flex-1 bg-slate-800 border border-slate-600 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-500" />
                        <button type="submit" className="bg-purple-600 text-white px-6 py-3 rounded-xl font-bold">{t.ai.send}</button>
                    </form>
                </div>
            );
        };

        const Guide = ({ language }) => {
            const t = TRANSLATIONS[language];
            return (
                <div className="max-w-4xl mx-auto py-12 px-4">
                    <h2 className="text-3xl font-bold serif text-center mb-12 text-amber-200">{t.guide.title}</h2>
                    <div className="space-y-6">
                        {t.guide.steps.map((step, i) => (
                            <div key={i} className="flex gap-6 bg-slate-800/40 p-6 rounded-2xl border border-slate-700">
                                <div className="w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center font-bold flex-shrink-0">{i+1}</div>
                                <div><h3 className="text-xl font-bold text-white mb-2">{step.title}</h3><p className="text-slate-300">{step.desc}</p></div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // ---------------------------------------------------------
        // 3. 메인 앱 (Main App)
        // ---------------------------------------------------------

        const App = () => {
            const [view, setView] = useState('HOME');
            const [lang, setLang] = useState('ko');
            const t = TRANSLATIONS[lang];

            return (
                <div className="min-h-screen pb-20">
                    {/* 네비게이션 */}
                    <nav className="sticky top-0 z-50 bg-[#0F111A]/90 backdrop-blur-md border-b border-slate-800">
                        <div className="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
                            <div className="flex items-center gap-3 cursor-pointer" onClick={() => setView('HOME')}>
                                <img src="https://amaranth-legal-sole-30.mypinata.cloud/ipfs/bafkreiaohqebkvodjwrnwt3673zaijntc3uc2g5mxg6vfdydqpeaf77s4a" className="w-10 h-10 rounded-lg" />
                                <span className="text-2xl font-bold serif text-white">WRISTORY</span>
                            </div>
                            <div className="flex items-center gap-6 text-sm font-medium">
                                <button onClick={() => setView('HOME')} className={view === 'HOME' ? 'text-white' : 'text-slate-400'}>{t.nav.collections}</button>
                                <button onClick={() => setView('AIRDROP')} className={view === 'AIRDROP' ? 'text-white' : 'text-slate-400'}>{t.nav.register}</button>
                                <button onClick={() => setView('GUIDE')} className={view === 'GUIDE' ? 'text-white' : 'text-slate-400'}>{t.nav.guide}</button>
                                <button onClick={() => setView('AI')} className="bg-slate-800 text-purple-300 px-3 py-1 rounded-full border border-slate-600">{t.nav.ai}</button>
                                <button onClick={() => setLang(l => l === 'en' ? 'ko' : 'en')} className="w-8 h-8 rounded-full bg-slate-700 text-xs">{lang === 'en' ? 'KO' : 'EN'}</button>
                            </div>
                        </div>
                    </nav>

                    {/* 컨텐츠 영역 */}
                    <main className="relative z-10">
                        {view === 'HOME' && (
                            <div>
                                <div className="py-20 px-6 text-center bg-gradient-to-b from-[#0F111A] to-slate-900">
                                    <h1 className="text-5xl md:text-7xl font-bold serif text-white mb-6 text-shadow">{t.hero.title}</h1>
                                    <p className="text-xl text-slate-400 max-w-2xl mx-auto mb-10">{t.hero.subtitle}</p>
                                    <HeroSlideshow artworks={COLLECTIONS} />
                                    <div className="flex justify-center gap-4">
                                        <button onClick={() => setView('AIRDROP')} className="px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-slate-200">{t.hero.joinBtn}</button>
                                    </div>
                                </div>
                                <div className="max-w-7xl mx-auto px-6 mt-10 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {COLLECTIONS.map(col => <CollectionCard key={col.id} collection={col} language={lang} />)}
                                </div>
                            </div>
                        )}
                        {view === 'AIRDROP' && <div className="py-12 px-6"><AirdropForm language={lang} /></div>}
                        {view === 'GUIDE' && <div className="py-12 px-6"><Guide language={lang} /></div>}
                        {view === 'AI' && <div className="py-12 px-6"><AiAssistant language={lang} /></div>}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
